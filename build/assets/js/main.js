!function(){var t;t=function(n){var s,r,a,e,i,o,c,l,p,u,h,d,f,g,v;return u="garden-update.json",a="all",v=6,d=5,r=!1,s=!1,p=function(){return console.log("(gardencal) initialized"),h()},h=function(){return n.getJSON(u,function(t){return console.log("JSON loaded"),e(t)})},e=function(r){var a;return n(".gardencal").html(Mustache.render(n("#template").html(),r)),a=n(".crops"),s=n(".crops > li"),n(r.crops).each(function(){var t,r;return t=this.name,r=void 0,n(s).each(function(){return n(this).attr("data-crop")===t?r=this:void 0}),r?i(this,r):void 0}),a.css("width",6*r.crops.length+"rem"),n(".key li").click(function(){return t.togglePhase(n(this).find("span").attr("class"))})},i=function(s,r){var a,e,i,c,l;for(n("h3 > a",r).click(function(){return t.fadeToggleCrop(r)}),n("label",r).click(function(){return t.toggleCrop(r)}),c=s.plantings,l=[],e=0,i=c.length;i>e;e++)a=c[e],l.push(o(a,r));return l},o=function(t,n){var s;return s=['<span class="','">&nbsp;</span>'],t.plant&&c(t.plant,"plant",n),t.transplant&&c(t.transplant,"transplant",n),c(t.harvest,"harvest",n)},c=function(t,s,r){var a,e,i,o,c,l,p;return e=['<span class="','">&nbsp;</span>'],o=t.start.split("-"),c=t.stop.split("-"),p=(o[0]-1+o[1]/30)*d,a=(c[0]-1+c[1]/30)*d,i=n(e[0]+s+e[1]).appendTo(r),i.css("top",p+v+"rem"),i.css("height",a-p+"rem"),i.data("start",t.start),i.data("end",t.stop),l=s+": "+t.start+" to "+t.stop,t.notes&&(l+="<br>"+t.notes),i.qtip({content:l,position:{my:"center left",at:"center right"},show:{delay:0},hide:{delay:0}})},l=function(t){return n(s[0]).css("opacity")<1||n(s[1]).css("opacity")<1?s.css("opacity",1):(s.css("opacity",.25),n(t).css("opacity",1))},f=function(t){return n(s[0]).is(":visible")&&n(s[1]).is(":visible")?(s.hide(),n(t).show(),n(window).scrollLeft(0)):s.show()},g=function(t){return"all"===a?(a=t,s.find("span").hide(),s.find("span."+t).show()):(s.find("span").show(),a="all")},{init:p,fadeToggleCrop:l,toggleCrop:f,togglePhase:g}}(jQuery),$(function(){return t.init()})}.call(this);